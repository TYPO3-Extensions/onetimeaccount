<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<formidable version="1.0.0"
	xmlns:datahandler="http://www.ameos.com/formidable/1.0.0/datahandler"
	xmlns:datasource="http://www.ameos.com/formidable/1.0.0/datasource"
	xmlns:renderer="http://www.ameos.com/formidable/1.0.0/renderer"
	xmlns:renderlet="http://www.ameos.com/formidable/1.0.0/renderlet"
	xmlns:validator="http://www.ameos.com/formidable/1.0.0/validator"
	xmlns:actionlet="http://www.ameos.com/formidable/1.0.0/actionlet">
	<meta>
		<name>One-time FE account generation form</name>
		<description>This form allows users to create one-time FE accounts</description>
		<form>
			<formid>tx_onetimeaccount_pi1_form</formid>
		</form>
		<debug>false</debug>
		<displaylabels>false</displaylabels>
	</meta>
	<control>
		<datahandler:DB>
			<tablename>fe_users</tablename>
			<keyname>uid</keyname>
			<labelname>name</labelname>
			<process>
				<beforeinsertion>
					<userobj>
						<extension>this</extension>
						<method>setCurrentUserGroup</method>
					</userobj>
				</beforeinsertion>
			</process>
		</datahandler:DB>
		<renderer:TEMPLATE>
			<template>
				<path>
					<userobj>
						<extension>this</extension>
						<method>getTemplatePath</method>
					</userobj>
				</path>
				<subpart>###ONETIMEACCOUNT_FORM###</subpart>
				<errortag>errors</errortag>
			</template>
		</renderer:TEMPLATE>
		<actionlets>
			<actionlet:REDIRECT>
				<url>
					<userobj>
						<extension>this</extension>
						<method>getRedirectUrlAndLoginUser</method>
					</userobj>
				</url>
			</actionlet:REDIRECT>
		</actionlets>
	</control>
	<elements>
		<renderlet:TEXT name="company">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="company" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_company">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="company" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:LISTBOX name="gender">
			<data>
				<items>
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_gender.I.0" value ="0" />
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_gender.I.1" value ="1" />
				</items>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="gender" />
					</params>
				</userobj>
			</process>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="title">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="title" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_title">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="title" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="name">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="name" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<required message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_name"/>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="first_name">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="first_name" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_first_name">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="first_name" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="last_name">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="last_name" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_last_name">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="last_name" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXTAREA name="address">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="address" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_address">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="address" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXTAREA>
		<renderlet:TEXT name="zip">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="zip" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_zip">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="zip" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="city">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="city" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_city">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="city" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="zone">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="zone" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_zone">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="zone" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:LISTBOX name="country">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListCountries</method>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getDefaultCountry</method>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="country" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_country">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="country" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:LISTBOX>
		<renderlet:LISTBOX name="static_info_country">
			<data>
				<userobj>
					<extension>this</extension>
					<method>populateListCountries</method>
					<params>
						<data name="alpha3" value="1" />
					</params>
				</userobj>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getDefaultCountry</method>
						<params>
							<data name="alpha3" value="1" />
						</params>
					</userobj>
				</defaultvalue>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="static_info_country" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_country">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="static_info_country" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:LISTBOX>
		<renderlet:TEXT name="email">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="email" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_email">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="email" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="www">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="www" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_www">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="www" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="telephone">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="telephone" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_telephone">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="telephone" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:TEXT name="fax">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="fax" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_fax">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="fax" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXT>
		<renderlet:DATE name="date_of_birth">
			<data>
				<datetime format="%d.%m.%Y" converttotimestamp="true"
					allowmanualedition="true"/>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="date_of_birth" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_date_of_birth">
						<extension>this</extension>
						<method>validateIntegerField</method>
						<params>
							<data name="elementName" value="date_of_birth" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:DATE>
		<renderlet:LISTBOX name="status">
			<data>
				<items>
					<item caption="&amp;nbsp;" value ="0" />
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_status.I.1" value ="1" />
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_status.I.2" value ="2" />
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_status.I.3" value ="3" />
					<item caption="LLL:EXT:onetimeaccount/pi1/locallang.xml:label_status.I.4" value ="4" />
				</items>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="status" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_status">
						<extension>this</extension>
						<method>validateIntegerField</method>
						<params>
							<data name="elementName" value="status" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:LISTBOX>
		<renderlet:RADIOBUTTON name="usergroup">
			<data>
				<defaultvalue>
					<userobj>
						<extension>this</extension>
						<method>getUidOfFirstUserGroup</method>
					</userobj>
				</defaultvalue>
				<userobj>
					<extension>this</extension>
					<method>listUserGroups</method>
				</userobj>
			</data>
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="usergroup" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_choose_usergroup">
						<extension>this</extension>
						<method>isRadiobuttonSelected</method>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:RADIOBUTTON>
		<renderlet:CHECKSINGLE name="module_sys_dmail_html">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="module_sys_dmail_html" />
					</params>
				</userobj>
			</process>
		</renderlet:CHECKSINGLE>
		<renderlet:TEXTAREA name="comments">
			<process>
				<userobj>
					<extension>this</extension>
					<method>isFormFieldEnabled</method>
					<params>
						<data name="elementname" value="comments" />
					</params>
				</userobj>
			</process>
			<validators>
				<validator:STANDARD>
					<userobj message="LLL:EXT:onetimeaccount/pi1/locallang.xml:message_comments">
						<extension>this</extension>
						<method>validateStringField</method>
						<params>
							<data name="elementName" value="comments" />
						</params>
					</userobj>
				</validator:STANDARD>
			</validators>
		</renderlet:TEXTAREA>
		<renderlet:SUBMIT name="button_submit">
			<label>###LABEL_SUBMIT###</label>
		</renderlet:SUBMIT>
		<renderlet:PASSTHRU name="crdate">
			<data>
				<value>CURRENT_TIMESTAMP</value>
			</data>
		</renderlet:PASSTHRU>
		<renderlet:PASSTHRU name="tstamp">
			<data>
				<value>CURRENT_TIMESTAMP</value>
			</data>
		</renderlet:PASSTHRU>
		<renderlet:PASSTHRU name="pid">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getPidForNewUserRecords</method>
					</userobj>
				</value>
			</data>
		</renderlet:PASSTHRU>
		<renderlet:PASSTHRU name="username">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getUserName</method>
					</userobj>
				</value>
			</data>
		</renderlet:PASSTHRU>
		<renderlet:PASSTHRU name="password">
			<data>
				<value>
					<userobj>
						<extension>this</extension>
						<method>getPassword</method>
					</userobj>
				</value>
			</data>
		</renderlet:PASSTHRU>
	</elements>
</formidable>